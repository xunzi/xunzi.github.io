<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Testinstallation: Owncloud</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Christian Drexler">

    <!-- Le styles -->
    <link rel="stylesheet" href="https://xunzi.github.io/theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="https://xunzi.github.io/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="https://xunzi.github.io/theme/css/font-awesome.css" rel="stylesheet">

    <link href="https://xunzi.github.io/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="https://xunzi.github.io/theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="https://xunzi.github.io/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://xunzi.github.io/theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://xunzi.github.io/theme/images/apple-touch-icon-114x114.png">

    <link href="https://xunzi.github.io/" type="application/atom+xml" rel="alternate" title="Bloggggg ATOM Feed" />

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="https://xunzi.github.io/index.html">Bloggggg</strong></a>
          <div class="nav-collapse">
            <ul class="nav">
                <li><a href="https://xunzi.github.io/pages/about.html">Über diese Seiten</a></li>
                          <li class="divider-vertical"></li>
                  <li class="active">
                    <a href="https://xunzi.github.io/category/misc.html">
						<i class="icon-folder-open icon-large"></i>misc
					</a>
                  </li>

                          <ul class="nav pull-right">
                                <li><a href="https://xunzi.github.io/archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="span9" id="content">
<section id="content">
        <article>
                <header>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to Testinstallation: Owncloud">
                                        Testinstallation: Owncloud
                                </a>
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
<footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2012-04-12T15:32:00+02:00">
        <i class="icon-calendar"></i>Thu 12 April 2012
</abbr>
<span class="label">By</span>
<a href="https://xunzi.github.io/author/christian-drexler.html"><i class="icon-user"></i>Christian Drexler</a>
<span class="label">Category</span>
<a href="https://xunzi.github.io/category/misc.html"><i class="icon-folder-open"></i>misc</a>.


<span class="label">Tags</span>
	<a href="https://xunzi.github.io/tag/owncloud.html"><i class="icon-tag"></i>owncloud</a>
	<a href="https://xunzi.github.io/tag/php-fpm.html"><i class="icon-tag"></i>php-fpm</a>
	<a href="https://xunzi.github.io/tag/nginx.html"><i class="icon-tag"></i>nginx</a>
</footer><!-- /.post-info -->                </div>
                <p>Ich habe - angeregt durch die Jubelmeldungen über <a href="http://owncloud.org">owncloud</a> - eine
Testinstanz von "Your Cloud, Your Data, Your Way!" aufgesetzt. OC
kombiniert einen Webdav-Server, mit dem man die Dateien in die
Dateimanager moderner Betriebssysteme einbinden kann mit einem
Kalender/Caldav-Server und einem Addressbuch/carddav-Server. Die
Standards caldav und carddav werden z. B. von Apples iOS unterstützt, so
dass man in der eigenen Wolke seine Kalenderdaten und Kontakte speichern
kann, ohne dass Google oder die anderen üblichen Verdächtigen nen
schnellen Euro mit der Zweit- und Drittverwertung der persönlichen Daten
machen können.</p>
<p>Das ist soweit ja ganz schnuckelig, leider ist das Ganze in Php
geschrieben (apropos: <a href="http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/">hier</a> gibt es ein schönes Php-Bashing), um es
mit Nginx zum Laufen zu kriegen, braucht es einen Fcgi-Server, der den
Php-Matsch ausführt, unter Ubuntu gibt es dafür <a href="http://packages.ubuntu.com/oneiric/php5-fpm">php-fpm</a>.</p>
<p>Die iOS-Clients finden die Caldav- und Carddav-Server für eine bestimmte
Domäne per DNS-Request (Details dazu gibt es <a href="http://andrew.mcmillan.net.nz/blog/srv_records_with_dnsmasq">hier</a>).  Ist der Server
einmal lokalisiert, sucht iOS nach well-known-Resourcen gemäss
<a href="http://tools.ietf.org/html/rfc5785.html">RFC5785</a>.</p>
<p>Da diese nicht in der Owncoud-Applikation abgebildet werden, empfiehlt
sich ein Redirect:</p>
<div class="highlight"><pre><span></span><span class="err">rewrite ^/.well-known/host-meta /public.php?service=host-meta last;rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;</span>
<span class="err">rewrite ^/.well-known/carddav /remote.php/carddav/ redirect;rewrite ^/.well-known/caldav /remote.php/caldav/ redirect;rewrite ^(/core/doc/[^\/]+/)$ $1/index.html;</span>
</pre></div>


<p>Das reicht aber immer noch nicht, um das MacOS-Addressbuch glücklich zu
machen, hier bedarf es eines weiteren Redirects:</p>
<div class="highlight"><pre><span></span><span class="err">rewrite /apps/contacts/carddav.php/addressbooks/(.+)/addressbook/ /apps/contacts/carddav.php/addressbooks/$1/default permanent;</span>
</pre></div>


<p>Das funktioniert natürlich nur, wenn der Kalender auch <code>default</code> heisst,
ist das nicht der Fall, klappt es nicht mehr. Diese Probleme sind wohl
in der Lion-Version des MacOS-Adressbuches behoben.</p>
<p><strong>Edit:</strong> Synchronisation mit Thunderbird klappt auch, der Kalender
braucht das <a href="https://addons.mozilla.org/thunderbird/2313/">Lightning-Plugin</a> und das Addressbuch kann man mit Hilfe
des <a href="http://www.sogo.nu/files/downloads/extensions/sogo-connector-10.0.1.xpi">Sogo-Konnektors</a> und des Plugins "<a href="https://nic-nac-project.org/~kaosmos/morecols-en.html">More Functions for
Addressbook</a>" syncen, klappt erstaunlich schmerzfrei.</p>
<p><strong>Edit</strong>: Nach dem Update auf Lion klappt das Caldav-Discovery
tatsächlich problemlos.</p>
                </div><!-- /.entry-content -->
        </article>
</section>
        </div><!--/span-->

                <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-external-link"></i>blogroll</h4></li>
    <li><a href="https://github.com/getpelican/pelican"><i class="icon-external-link"></i>Pelican</a></li>
    <li><a href="http://python.org/"><i class="icon-external-link"></i>Python.org</a></li>
<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>
<li><a href="https://xunzi.github.io/feeds/atom.xml" rel="alternate"><i class="icon-bookmark icon-large"></i>atom feed</a></li>
    <li><a href="https://twitter.com/xunzi"><i class="icon-twitter-sign icon-large"></i>twitter</a></li>
    <li><a href="https://github.com/xunzi/"><i class="icon-Github-sign icon-large"></i>Github</a></li>

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="https://xunzi.github.io/category/misc.html">
    <i class="icon-folder-open icon-large"></i>misc
</a>
</li>

<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/roundcube.html">
        <i class="icon-tag icon-large"></i>roundcube
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/php-fpm.html">
        <i class="icon-tag icon-large"></i>php-fpm
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/security.html">
        <i class="icon-tag icon-large"></i>security
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/prosody.html">
        <i class="icon-tag icon-large"></i>prosody
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/spotlight.html">
        <i class="icon-tag icon-large"></i>spotlight
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/debian.html">
        <i class="icon-tag icon-large"></i>debian
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/pelican.html">
        <i class="icon-tag icon-large"></i>pelican
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/owncloud.html">
        <i class="icon-tag icon-large"></i>owncloud
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/linux.html">
        <i class="icon-tag icon-large"></i>linux
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/jabber.html">
        <i class="icon-tag icon-large"></i>jabber
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/blockdevice.html">
        <i class="icon-tag icon-large"></i>blockdevice
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/mysql.html">
        <i class="icon-tag icon-large"></i>mysql
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/verkehr.html">
        <i class="icon-tag icon-large"></i>verkehr
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/virsh.html">
        <i class="icon-tag icon-large"></i>virsh
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/dstat.html">
        <i class="icon-tag icon-large"></i>dstat
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/ssl.html">
        <i class="icon-tag icon-large"></i>ssl
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/lxd.html">
        <i class="icon-tag icon-large"></i>lxd
    </a>
</li>
<li class="tag-1">
    <a href="https://xunzi.github.io/tag/rootserver.html">
        <i class="icon-tag icon-large"></i>rootserver
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/photos.html">
        <i class="icon-tag icon-large"></i>photos
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/emacs.html">
        <i class="icon-tag icon-large"></i>emacs
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/dotfiles.html">
        <i class="icon-tag icon-large"></i>dotfiles
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/virtualbox.html">
        <i class="icon-tag icon-large"></i>virtualbox
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/macos.html">
        <i class="icon-tag icon-large"></i>macos
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/snmp.html">
        <i class="icon-tag icon-large"></i>snmp
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/bookmarks.html">
        <i class="icon-tag icon-large"></i>bookmarks
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/nginx.html">
        <i class="icon-tag icon-large"></i>nginx
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/backup.html">
        <i class="icon-tag icon-large"></i>backup
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/django.html">
        <i class="icon-tag icon-large"></i>django
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/taz.html">
        <i class="icon-tag icon-large"></i>taz
    </a>
</li>
<li class="tag-1">
    <a href="https://xunzi.github.io/tag/helferlein.html">
        <i class="icon-tag icon-large"></i>helferlein
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/zsh.html">
        <i class="icon-tag icon-large"></i>zsh
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/kvm.html">
        <i class="icon-tag icon-large"></i>kvm
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/pebble.html">
        <i class="icon-tag icon-large"></i>pebble
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/php.html">
        <i class="icon-tag icon-large"></i>php
    </a>
</li>
<li class="tag-0">
    <a href="https://xunzi.github.io/tag/web.html">
        <i class="icon-tag icon-large"></i>web
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/ubuntu.html">
        <i class="icon-tag icon-large"></i>ubuntu
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/apache.html">
        <i class="icon-tag icon-large"></i>apache
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/mezzanine.html">
        <i class="icon-tag icon-large"></i>mezzanine
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/dovecot.html">
        <i class="icon-tag icon-large"></i>dovecot
    </a>
</li>
<li class="tag-2">
    <a href="https://xunzi.github.io/tag/org-mode.html">
        <i class="icon-tag icon-large"></i>org-mode
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/radfahren.html">
        <i class="icon-tag icon-large"></i>radfahren
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/beamer.html">
        <i class="icon-tag icon-large"></i>beamer
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/firefox.html">
        <i class="icon-tag icon-large"></i>firefox
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/tmux.html">
        <i class="icon-tag icon-large"></i>tmux
    </a>
</li>
<li class="tag-4">
    <a href="https://xunzi.github.io/tag/qemu-img.html">
        <i class="icon-tag icon-large"></i>qemu-img
    </a>
</li>


</ul>        </div><!--/.well -->

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
        </address><!-- /#about -->

        <p>The theme is from <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>,
        and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
        <p> Last update Sat Feb  9 16:19:02 2019</p>
         <p><tiny>Revision 829ede87f770d62f13698668e2343e037fe9cc48</tiny> </p>
      </footer>

    </div><!--/.fluid-container-->


       <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://xunzi.github.io/theme/js/jquery-1.7.2.min.js"></script>
    <script src="https://xunzi.github.io/theme/js/bootstrap.min.js"></script>
  </body>
</html>