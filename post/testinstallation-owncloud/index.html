<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Testinstallation: Owncloud | Yaub (yet another useless blog)</title>
<meta name=keywords content="owncloud,php-fpm,nginx"><meta name=description content="Ich habe - angeregt durch die Jubelmeldungen über owncloud - eine Testinstanz von &ldquo;Your Cloud, Your Data, Your Way!&rdquo; aufgesetzt. OC kombiniert einen Webdav-Server, mit dem man die Dateien in die Dateimanager moderner Betriebssysteme einbinden kann mit einem Kalender/Caldav-Server und einem Addressbuch/carddav-Server. Die Standards caldav und carddav werden z. B. von Apples iOS unterstützt, so dass man in der eigenen Wolke seine Kalenderdaten und Kontakte speichern kann, ohne dass Google oder die anderen üblichen Verdächtigen nen schnellen Euro mit der Zweit- und Drittverwertung der persönlichen Daten machen können."><meta name=author content="Christian Drexler"><link rel=canonical href=https://drexler-online.net/post/testinstallation-owncloud/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://drexler-online.net/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://drexler-online.net/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://drexler-online.net/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://drexler-online.net/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://drexler-online.net/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Testinstallation: Owncloud"><meta property="og:description" content="Ich habe - angeregt durch die Jubelmeldungen über owncloud - eine Testinstanz von &ldquo;Your Cloud, Your Data, Your Way!&rdquo; aufgesetzt. OC kombiniert einen Webdav-Server, mit dem man die Dateien in die Dateimanager moderner Betriebssysteme einbinden kann mit einem Kalender/Caldav-Server und einem Addressbuch/carddav-Server. Die Standards caldav und carddav werden z. B. von Apples iOS unterstützt, so dass man in der eigenen Wolke seine Kalenderdaten und Kontakte speichern kann, ohne dass Google oder die anderen üblichen Verdächtigen nen schnellen Euro mit der Zweit- und Drittverwertung der persönlichen Daten machen können."><meta property="og:type" content="article"><meta property="og:url" content="https://drexler-online.net/post/testinstallation-owncloud/"><meta property="article:section" content="post"><meta property="article:published_time" content="2012-04-12T00:00:00+00:00"><meta property="article:modified_time" content="2021-12-26T22:21:01+01:00"><meta property="og:site_name" content="Yaub (yet another useless blog)"><meta name=twitter:card content="summary"><meta name=twitter:title content="Testinstallation: Owncloud"><meta name=twitter:description content="Ich habe - angeregt durch die Jubelmeldungen über owncloud - eine Testinstanz von &ldquo;Your Cloud, Your Data, Your Way!&rdquo; aufgesetzt. OC kombiniert einen Webdav-Server, mit dem man die Dateien in die Dateimanager moderner Betriebssysteme einbinden kann mit einem Kalender/Caldav-Server und einem Addressbuch/carddav-Server. Die Standards caldav und carddav werden z. B. von Apples iOS unterstützt, so dass man in der eigenen Wolke seine Kalenderdaten und Kontakte speichern kann, ohne dass Google oder die anderen üblichen Verdächtigen nen schnellen Euro mit der Zweit- und Drittverwertung der persönlichen Daten machen können."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Blog","item":"https://drexler-online.net/post/"},{"@type":"ListItem","position":3,"name":"Testinstallation: Owncloud","item":"https://drexler-online.net/post/testinstallation-owncloud/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Testinstallation: Owncloud","name":"Testinstallation: Owncloud","description":"Ich habe - angeregt durch die Jubelmeldungen über owncloud - eine Testinstanz von \u0026ldquo;Your Cloud, Your Data, Your Way!\u0026rdquo; aufgesetzt. OC kombiniert einen Webdav-Server, mit dem man die Dateien in die Dateimanager moderner Betriebssysteme einbinden kann mit einem Kalender/Caldav-Server und einem Addressbuch/carddav-Server. Die Standards caldav und carddav werden z. B. von Apples iOS unterstützt, so dass man in der eigenen Wolke seine Kalenderdaten und Kontakte speichern kann, ohne dass Google oder die anderen üblichen Verdächtigen nen schnellen Euro mit der Zweit- und Drittverwertung der persönlichen Daten machen können.","keywords":["owncloud","php-fpm","nginx"],"articleBody":"Ich habe - angeregt durch die Jubelmeldungen über owncloud - eine Testinstanz von “Your Cloud, Your Data, Your Way!” aufgesetzt. OC kombiniert einen Webdav-Server, mit dem man die Dateien in die Dateimanager moderner Betriebssysteme einbinden kann mit einem Kalender/Caldav-Server und einem Addressbuch/carddav-Server. Die Standards caldav und carddav werden z. B. von Apples iOS unterstützt, so dass man in der eigenen Wolke seine Kalenderdaten und Kontakte speichern kann, ohne dass Google oder die anderen üblichen Verdächtigen nen schnellen Euro mit der Zweit- und Drittverwertung der persönlichen Daten machen können.\nDas ist soweit ja ganz schnuckelig, leider ist das Ganze in Php geschrieben (apropos: hier gibt es ein schönes Php-Bashing), um es mit Nginx zum Laufen zu kriegen, braucht es einen Fcgi-Server, der den Php-Matsch ausführt, unter Ubuntu gibt es dafür php-fpm.\nDie iOS-Clients finden die Caldav- und Carddav-Server für eine bestimmte Domäne per DNS-Request (Details dazu gibt es hier). Ist der Server einmal lokalisiert, sucht iOS nach well-known-Resourcen gemäss RFC5785.\nDa diese nicht in der Owncoud-Applikation abgebildet werden, empfiehlt sich ein Redirect:\nrewrite ^/.well-known/host-meta /public.php?service=host-meta last;rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last; rewrite ^/.well-known/carddav /remote.php/carddav/ redirect;rewrite ^/.well-known/caldav /remote.php/caldav/ redirect;rewrite ^(/core/doc/[^\\/]+/)$ $1/index.html; Das reicht aber immer noch nicht, um das MacOS-Addressbuch glücklich zu machen, hier bedarf es eines weiteren Redirects:\nrewrite /apps/contacts/carddav.php/addressbooks/(.+)/addressbook/ /apps/contacts/carddav.php/addressbooks/$1/default permanent; Das funktioniert natürlich nur, wenn der Kalender auch default heisst, ist das nicht der Fall, klappt es nicht mehr. Diese Probleme sind wohl in der Lion-Version des MacOS-Adressbuches behoben.\nEdit: Synchronisation mit Thunderbird klappt auch, der Kalender braucht das Lightning-Plugin und das Addressbuch kann man mit Hilfe des Sogo-Konnektors und des Plugins “More Functions for Addressbook” syncen, klappt erstaunlich schmerzfrei.\nEdit: Nach dem Update auf Lion klappt das Caldav-Discovery tatsächlich problemlos.\n","wordCount":"280","inLanguage":"en","datePublished":"2012-04-12T00:00:00Z","dateModified":"2021-12-26T22:21:01+01:00","author":{"@type":"Person","name":"Christian Drexler"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://drexler-online.net/post/testinstallation-owncloud/"},"publisher":{"@type":"Organization","name":"Yaub (yet another useless blog)","logo":{"@type":"ImageObject","url":"https://drexler-online.net/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://drexler-online.net accesskey=h title="Home (Alt + H)"><img src=https://drexler-online.net/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://drexler-online.net/about title=about><span>about</span></a></li><li><a href=https://drexler-online.net/tags/ title=tags><span>tags</span></a></li><li><a href=https://social.konsolenknecht.de/users/cd title="activity pub"><span>activity pub</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://github.com/xunzi title=github><span>github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://drexler-online.net>Home</a>&nbsp;»&nbsp;<a href=https://drexler-online.net/post/>Blog</a></div><h1 class=post-title>Testinstallation: Owncloud</h1><div class=post-meta><span title='2012-04-12 00:00:00 +0000 UTC'>April 12, 2012</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;280 words&nbsp;·&nbsp;Christian Drexler</div></header><div class=post-content><p>Ich habe - angeregt durch die Jubelmeldungen über <a href=http://owncloud.org>owncloud</a> - eine
Testinstanz von &ldquo;Your Cloud, Your Data, Your Way!&rdquo; aufgesetzt. OC
kombiniert einen Webdav-Server, mit dem man die Dateien in die
Dateimanager moderner Betriebssysteme einbinden kann mit einem
Kalender/Caldav-Server und einem Addressbuch/carddav-Server. Die
Standards caldav und carddav werden z. B. von Apples iOS unterstützt, so
dass man in der eigenen Wolke seine Kalenderdaten und Kontakte speichern
kann, ohne dass Google oder die anderen üblichen Verdächtigen nen
schnellen Euro mit der Zweit- und Drittverwertung der persönlichen Daten
machen können.</p><p>Das ist soweit ja ganz schnuckelig, leider ist das Ganze in Php
geschrieben (apropos: <a href=http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/>hier</a> gibt es ein schönes Php-Bashing), um es
mit Nginx zum Laufen zu kriegen, braucht es einen Fcgi-Server, der den
Php-Matsch ausführt, unter Ubuntu gibt es dafür <a href=http://packages.ubuntu.com/oneiric/php5-fpm>php-fpm</a>.</p><p>Die iOS-Clients finden die Caldav- und Carddav-Server für eine bestimmte
Domäne per DNS-Request (Details dazu gibt es <a href=http://andrew.mcmillan.net.nz/blog/srv_records_with_dnsmasq>hier</a>).  Ist der Server
einmal lokalisiert, sucht iOS nach well-known-Resourcen gemäss
<a href=http://tools.ietf.org/html/rfc5785.html>RFC5785</a>.</p><p>Da diese nicht in der Owncoud-Applikation abgebildet werden, empfiehlt
sich ein Redirect:</p><pre><code>rewrite ^/.well-known/host-meta /public.php?service=host-meta last;rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;
rewrite ^/.well-known/carddav /remote.php/carddav/ redirect;rewrite ^/.well-known/caldav /remote.php/caldav/ redirect;rewrite ^(/core/doc/[^\/]+/)$ $1/index.html;
</code></pre><p>Das reicht aber immer noch nicht, um das MacOS-Addressbuch glücklich zu
machen, hier bedarf es eines weiteren Redirects:</p><pre><code>rewrite /apps/contacts/carddav.php/addressbooks/(.+)/addressbook/ /apps/contacts/carddav.php/addressbooks/$1/default permanent;
</code></pre><p>Das funktioniert natürlich nur, wenn der Kalender auch <code>default</code> heisst,
ist das nicht der Fall, klappt es nicht mehr. Diese Probleme sind wohl
in der Lion-Version des MacOS-Adressbuches behoben.</p><p><strong>Edit:</strong> Synchronisation mit Thunderbird klappt auch, der Kalender
braucht das <a href=https://addons.mozilla.org/thunderbird/2313/>Lightning-Plugin</a> und das Addressbuch kann man mit Hilfe
des <a href=http://www.sogo.nu/files/downloads/extensions/sogo-connector-10.0.1.xpi>Sogo-Konnektors</a> und des Plugins &ldquo;<a href=https://nic-nac-project.org/~kaosmos/morecols-en.html>More Functions for
Addressbook</a>&rdquo; syncen, klappt erstaunlich schmerzfrei.</p><p><strong>Edit</strong>: Nach dem Update auf Lion klappt das Caldav-Discovery
tatsächlich problemlos.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://drexler-online.net/tags/owncloud/>owncloud</a></li><li><a href=https://drexler-online.net/tags/php-fpm/>php-fpm</a></li><li><a href=https://drexler-online.net/tags/nginx/>nginx</a></li></ul><nav class=paginav><a class=prev href=https://drexler-online.net/post/apache-raus-nginx-rein/><span class=title>« Prev</span><br><span>Apache raus, Nginx rein</span>
</a><a class=next href=https://drexler-online.net/post/snmp-unter-ubuntu/><span class=title>Next »</span><br><span>Snmp unter Ubuntu</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://drexler-online.net>Yaub (yet another useless blog)</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>