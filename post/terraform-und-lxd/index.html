<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.90.1" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>Terraform und Lxd&nbsp;&ndash;&nbsp;Bloggggggg</title><link rel="stylesheet" href="/css/core.min.9e958365cf0319ede466a402e1369f31dc1f205c868aa836fe25581725c829d3f3545d9f142cccafe35363950a63e2a6.css" integrity="sha384-npWDZc8DGe3kZqQC4TafMdwfIFyGiqg2/iVYFyXIKdPzVF2fFCzMr&#43;NTY5UKY&#43;Km"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Terraform und Lxd" /><body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><img class="site logo" src="/images/wolken.jpg" alt /><span class="site name">Bloggggggg</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/about">About</a><a class="nav item" href="https://gohugo%2eio/"target="_blank" rel="noopener noreferrer">Hugo</a><a class="nav item" href="https://github%2ecom/xunzi"target="_blank" rel="noopener noreferrer">Github</a><a class="nav item" href="https://twitter%2ecom/xunzi"target="_blank" rel="noopener noreferrer">Twitter</a></nav></div></span></div><div class="site slogan"><span class="title">100% JavaScript-free</span></div></section><section id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">Terraform und Lxd</h1><p class="article date">2021-12-25<span class="lastmod"> • edited 2021-12-27</span></p></section><article class="article markdown-body"><p><a href="https://www.terraform.io/"target="_blank" rel="noopener noreferrer">Terraform</a>
 ist eine deklarative Beschreibungssprache für Cloud-Infrastrukturen.</p>
<p>Unterstützt werden viele Cloudprovider, unter anderem auch lxd.</p>
<p>Ein kleines Beispiel für das Deployment von zwei lxd-Containern:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-terraform" data-lang="terraform"><span class="nx">terraform</span> <span class="p">{</span>

	<span class="nx">required_providers</span> <span class="p">{</span>
        	<span class="na">lxd</span> = <span class="p">{</span>
                	<span class="na">source</span> = <span class="s2">&#34;terraform-lxd/lxd&#34;</span>
			<span class="na">version</span> = <span class="s2">&#34;1.6.0&#34;</span>
        	<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kr">
</span><span class="kr">provider</span> <span class="s2">&#34;lxd&#34;</span> <span class="p">{</span>
  <span class="na">generate_client_certificates</span> = <span class="kc">true</span>
  <span class="na">accept_remote_certificate</span>    = <span class="kc">true</span>

 <span class="nx">lxd_remote</span> <span class="p">{</span>
    <span class="na">name</span>     = <span class="s2">&#34;rpi4-8gb&#34;</span>
    <span class="na">scheme</span>   = <span class="s2">&#34;https&#34;</span>
    <span class="na">address</span>  = <span class="s2">&#34;10.10.10.1&#34;</span>
    <span class="na">password</span> = <span class="s2">&#34;sowasvongeheim&#34;</span>
    <span class="na">default</span>  = <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kr">
</span><span class="kr">resource</span> <span class="s2">&#34;lxd_cached_image&#34;</span> <span class="s2">&#34;focal&#34;</span> <span class="p">{</span>
  <span class="na">source_remote</span> = <span class="s2">&#34;ubuntu&#34;</span>
  <span class="na">source_image</span>  = <span class="s2">&#34;ed6764dcaa08&#34;</span>
<span class="p">}</span>
<span class="kr">
</span><span class="kr"> resource</span> <span class="s2">&#34;lxd_container&#34;</span> <span class="s2">&#34;pg&#34;</span> <span class="p">{</span>
  <span class="na">name</span>      = <span class="s2">&#34;pg0</span><span class="si">${</span><span class="nb">count</span><span class="p">.</span><span class="nx">index</span><span class="si">}</span><span class="s2">&#34;</span>
  <span class="na">count</span>     = <span class="m">2</span>
  <span class="na">image</span>     = <span class="s2">&#34;</span><span class="si">${</span><span class="nx">lxd_cached_image</span><span class="p">.</span><span class="nx">focal</span><span class="p">.</span><span class="nx">fingerprint</span><span class="si">}</span><span class="s2">&#34;</span>
  <span class="na">profiles</span>  = <span class="p">[</span><span class="s2">&#34;pgbase&#34;</span><span class="p">]</span>
  <span class="na">ephemeral</span> = <span class="kc">false</span>

  <span class="na">config</span> = <span class="p">{</span>
    <span class="s2">&#34;boot.autostart&#34;</span> <span class="o">=</span> <span class="kc">true</span>
  <span class="p">}</span>

  <span class="na">limits</span> = <span class="p">{</span>
    <span class="na">cpu</span> = <span class="m">1</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kr">
</span><span class="kr">
</span><span class="kr">output</span> <span class="s2">&#34;ip_adresses&#34;</span> <span class="p">{</span>
  <span class="na">value</span> = <span class="p">{</span>
	<span class="k">for</span> <span class="nx">container</span> <span class="k">in</span> <span class="nx">lxd_container</span><span class="p">.</span><span class="nx">pg</span><span class="o">:</span>
	<span class="nx">container</span><span class="p">.</span><span class="nx">name</span> <span class="p">=&gt;</span> <span class="nx">container</span><span class="p">.</span><span class="nx">ipv4_address</span>
	<span class="p">}</span>
<span class="p">}</span>

</code></pre></div></article><section class="article labels"><a class="tag" href=/tags/terraform/>terraform</a><a class="tag" href=/tags/lxd/>lxd</a></section><section class="article author"><p class="name">Christian Drexler</p><div class="bio">Ex-Sinologe, Systemadministrator, betreibt Cloud-Infrastruktur für einen großen Mobilfunk- und Festnetzanbieter</div><div class="details"><a class="item" href="https://github.com/xunzi" target="_blank" rel="noopener noreferrer"><span class="iconfont icon-github"></span>&nbsp;xunzi</a><a class="item" href="https://twitter.com/xunzi" target="_blank" rel="noopener noreferrer"><span class="iconfont icon-twitter"></span>&nbsp;@xunzi</a><a class="item" href="mailto:webmaster@drexler-online.net" target="_blank" rel="noopener noreferrer"><span class="iconfont icon-email"></span>&nbsp;webmaster@drexler-online.net</a></div>
</section>
</div>
<div class="article bottom"><section class="article navigation"><p><a class="link" href="/post/pelican2hugo/"><span class="iconfont icon-article"></span>Pelican2Hugo</a></p><p><a class="link" href="/post/kvm-zu-lxd/"><span class="iconfont icon-article"></span>KVM zu LXD</a></p></section>
   <tiny>Commit cdfb595</tiny>
  
</div></section><section id="footer"><div class="footer-wrap">
    <p class="copyright">© 2008 - 2021 C. Drexler</p>
    <p class="powerby"><span>Powered&nbsp;by&nbsp;</span><a href="https://gohugo.io" 
        target="_blank" rel="noopener noreferrer">Hugo</a><span>&nbsp;&amp;&nbsp;</span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank" rel="noopener noreferrer">Notepadium</a></p></div>
</section></body>

</html>